<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: command.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: command.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const config = require('./config');

/**
 * Reads the command line arguments and runs an audio search
 * @returns {Boolean} Whether the command succeeded
 */
function commandline() {
	const headers = {
		score: 'Best fit',
		sample: 'Sample',
		seconds: 'Length',
		timecode: 'Timecode',
		expected: 'Expected',
		delta: 'Delta',
		length: 'Length',
		loadTime: 'Load',
		processTime: 'Process',
		rate: 'Rate',
		haystack: 'File',
	};
	config.needle = resolve(config._[0]);
	if (!existsSync(config.needle)) {
		console.error(`Could not find needle file (expected ${config.needle})`);
		return;
	}
	config.haystack = resolve(config._[1]);
	if (!existsSync(config.haystack)) {
		console.error(`Could not find haystack file (expected ${config.haystack})`);
		return;
	}
	const results = analyse(config.needle, config.haystack, config.expected);
	console.log(results);
	results.delta = round(results.delta) + 's';
	results.rate = round(results.rate) + 'x';
	results.score = round(results.score);
	results.timecode += 's';
	results.expected = config.expected + 's';
	results.loadTime += 's';
	results.processTime += 's';
	results.haystack = config.haystack.split('.').slice(0, -1).join('.');
	if (config.console !== false) {
		const summary = Object.keys(results).reduce((stats, stat) => ({...stats, [headers[stat]]: results[stat]}), {});
		console.info(lines(summary));
	}
	return true;
}

module.exports = commandline;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#arrayToFile">arrayToFile</a></li><li><a href="global.html#arrayToWAV">arrayToWAV</a></li><li><a href="global.html#commandline">commandline</a></li><li><a href="global.html#detectPeaks">detectPeaks</a></li><li><a href="global.html#fft">fft</a></li><li><a href="global.html#fileToArray">fileToArray</a></li><li><a href="global.html#fileToWAV">fileToWAV</a></li><li><a href="global.html#getConfig">getConfig</a></li><li><a href="global.html#graph">graph</a></li><li><a href="global.html#limitPeaks">limitPeaks</a></li><li><a href="global.html#line">line</a></li><li><a href="global.html#lines">lines</a></li><li><a href="global.html#maxima">maxima</a></li><li><a href="global.html#pad">pad</a></li><li><a href="global.html#smoothArray">smoothArray</a></li><li><a href="global.html#threshold">threshold</a></li><li><a href="global.html#videoToAudioFile">videoToAudioFile</a></li><li><a href="global.html#wavFileToArray">wavFileToArray</a></li><li><a href="global.html#wavToArray">wavToArray</a></li><li><a href="global.html#wavToFile">wavToFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed May 05 2021 01:16:30 GMT+1200 (New Zealand Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
